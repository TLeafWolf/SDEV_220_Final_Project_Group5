{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index Page</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div class="header-container">
        <table class = "nav_tab">
            <tr>
                <td>
    <img src="{% static 'icons/TLeafLogo2sm.png' %}" alt="T Leaf Logo">
</td>

 <td class = "pet">
    <div class = "head">
        Pet Supplies
        </div>
    </td>

<td class = "warn2">
    <center>
 Inventory Management System
</center>
</td>

<td class = "login">
    <a href="{% url 'login' %}"><button type="button">Login</button></a> 
</td>  
</tr>
</table>
</div>


{% if low_stock_items %}
    <div class = 'warning' style="color: red;">
        <center>
        <strong><h1>Warning:</h1></strong> Some supplies are low in stock!
        <a href="{% url 'low_stock_supplies' %}">View</a>
    
    </div>
    <center>
{% else %}
    <div style="color: rgb(0, 0, 0);">
        <center>
        All supplies are adequately stocked.
    </center>
    </div>
{% endif %}

    <div class = "filter">
    <form method="get" style="margin-bottom: 1rem;" >
        <input type="text" name="name" placeholder="Filter by name..." value="{{ name_query }}">
        <input type="text" name="location" placeholder="Filter by location..." value="{{ location_query }}"  style="width: 110px;" >
        <button type="submit">Filter</button>
    
        {% if name_query or location_query %}
            <a href="{% url 'index' %}"><button type="button">Reset</button></a>
        {% endif %}
    </form>
</div>
<div class="table-container">
    <div class="table-header">
        <table border="1" class="data_tab">
            <thead>
                <tr>
                    <th class="name_head">Name</th>
                    <th class="Price_head">Price</th>
                    <th class="Quan_head">Quantity</th>
                    <th class="loc_head">Location</th>
                    <th class="edit_head"></th>
                    <th></th>
                </tr>
            </thead>
        </table>
    </div>
    <div class="table-body">
        <table border="1" class="data_tab">
            <tbody>
                {% for supply in supplies %}
                <tr>
                    <td class="name_row">{{ supply.name }}</td>
                    <td class="Price_row">{{ supply.price }}</td>
                    <td class="Quan_row">{{ supply.quantity }}</td>
                    <td class="loc_row">{{ supply.location }}</td>
                    <td class='edit_button'>
                        <center>
                        {% if user.is_authenticated %}
                            <a href="{% url 'edit_supply' supply.name %}"><button type="button">Edit</button></a>
                        {% else %}
                            <span style="color: orange;">Login to edit</span>
                        {% endif %}
                        </center>
                    </td>
                    <td class='Del_button'>
                        <form action="{% url 'delete_supply' supply.name %}" method="post" style="display:inline;">
                            {% csrf_token %}
                            {% if user.is_authenticated %}
                                <button type="submit">Delete</button>
                            {% else %}
                                <span style="color: orange;">Login to Delete</span>
                            {% endif %}
                        </form>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No supplies available.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<table class = "bottom_nav">
    <tr>
        <td>
{% if user.is_authenticated %}
<a href="{% url 'add_supply' %}">
    <button type="button">Add</button>
</a>
{% else %}
<div style="color: orange;">
    <strong>Please log in to add, edit, or delete supplies.</strong>
</div>
{% endif %}
</td>
<td class = "blank"></td>
<td>
{% if user.is_authenticated %}
<a href="{% url 'export_supplies' %}">
    <button type="button">Export</button>
</a>
</td>
<td>
<a href="{% url 'import_supplies' %}">
    <button type="button">Import</button>
</a>
{% endif %}
</td>
</tr>
</table>
</body>
</html>
